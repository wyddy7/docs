# Лабораторная работа №6

## Ввод/вывод информации в процессорной системе, в том числе с использованием прерываний

**Цель работы:** Изучить возможные способы ввода/вывода информации в процессорной системе.

**Объекты изучения:**
- подсистема ввода-вывода процессора «NIOS II»
- приложение Intel Monitor Program (IMP)

## Планируемые результаты обучения

После выполнения этой работы студенты должны уметь:
- Реализовывать программно управляемый ввод/вывод
- Использовать опрос готовности устройств
- Работать с прерываниями для ввода/вывода
- Реализовывать приоритетные прерывания
- Понимать работу программных прерываний и невыполнимых команд

## Подготовка к лабораторной работе

Для выполнения лабораторной работы необходимо изучить по материалам лекций и предложенной литературе:

1. Подсистему ввода-вывода процессора NIOS II
2. Реализацию прерываний в процессорной системе с процессором NIOS II
3. Приоритеты прерываний и их обработку
4. Программные прерывания (trap) и невыполнимые команды

## Порядок выполнения лабораторной работы

### Часть 1. Программно управляемый ввод с переключателей и вывод на светодиоды

1. Напишите программу на языке ассемблер для ввода с переключателей и вывода на светодиоды. Программа должна считывать состояние переключателей и отображать их значение на светодиодах.

### Часть 2. Ввод информации с переключателей с опросом готовности

1. Модифицируйте программу так, чтобы ввод очередного числа осуществлялся только после отпускания кнопки KEY3. Реализуйте опрос состояния кнопки для определения момента её отпускания.

### Часть 3. Ввод информации с переключателей в режиме прерывания

1. Используйте вместо опроса готовности формирование прерывания, которое инициируется нажатием кнопки KEY3. Напишите обработчик прерывания, который будет считывать состояние переключателей и выводить их значение на светодиоды.

### Часть 4. Реализация приоритетных прерываний

1. Модифицируйте программу так, чтобы по кнопке KEY3 осуществлялось сложение, по KEY2 - вычитание, по KEY1 - обнуление суммы. Реализуйте обработчики прерываний для каждой кнопки с учетом их приоритетов.

### Часть 5. Программное прерывание trap и невыполнимые команды

1. Вставьте в текст программы команду trap. Изучите поведение программы при выполнении программного прерывания.

2. Экспериментально определите поведение программы при выполнении команды mul (умножение). Проверьте, является ли эта команда невыполнимой в процессоре NIOS II и как система реагирует на попытку её выполнения.

## Отчетные материалы

Отчетные материалы должны содержать:

1. Цель лабораторной работы
2. Материалы, связанные с подготовкой к работе
3. Информацию по выполнению каждого пункта задания
4. Написанные фрагменты программ
5. Краткое заключение

## Дополнительные материалы

- [Nios II Processor Reference Guide](https://www.intel.com/content/www/us/en/docs/programmable/683472/current/nios-ii-processor-reference-guide.html)
- Описание процессорной системы «DE2-70 Media Computer» или «DE2-115 Media Computer»

